<?xml version="1.0" encoding="utf-8"?>
<!-- 
Variables to replace:
  - VENDOR                      - Example: Eclipse Adoptium  
  - VENDOR_BRANDING             - Example: Eclipse Temurin
  - MSIX_DISPLAYNAME            - Example: Eclipse Temurin with hotspot 17.0.15+6 (x64)
  - OUTPUT_NAME                 - Example: OpenJDK17U-jdk-x64-windows-hotspot-17.0.15-6
                                  Note: OUTPUT_NAME cannot contain spaces or underscores.
  - DESCRIPTION                 - This is optional. Example: "Development Kit with Hotspot"
  - PRODUCT_MAJOR_VERSION       - Example: if the version is 17.0.15+6, this is 17
  - PRODUCT_MINOR_VERSION       - Example: if the version is 17.0.15+6, this is 0
  - PRODUCT_MAINTENANCE_VERSION - Example: if the version is 17.0.15+6, this is 15
  - PRODUCT_BUILD_NUMBER        - Example: if the version is 17.0.15+6, this is 6
  - ARCH                        - Valid architectures: x86, x64, arm, arm64, x86a64, neutral
  - PUBLISHER_CN                - Set this to anything on the right side of your `CN=` field in your .pfx file.
                                  This may include additional fields in the name, such as 'O=...'', 'L=...'', 'S=...', and/or others.
 -->
<Package IgnorableNamespaces="desktop4 desktop6 uap uap2 uap3 uap10 uap17 rescap"
  xmlns="http://schemas.microsoft.com/appx/manifest/foundation/windows10"
  xmlns:uap="http://schemas.microsoft.com/appx/manifest/uap/windows10"
  xmlns:uap2="http://schemas.microsoft.com/appx/manifest/uap/windows10/2"
  xmlns:uap3="http://schemas.microsoft.com/appx/manifest/uap/windows10/3"
  xmlns:uap5="http://schemas.microsoft.com/appx/manifest/uap/windows10/5"
  xmlns:uap10="http://schemas.microsoft.com/appx/manifest/uap/windows10/10"
  xmlns:uap17="http://schemas.microsoft.com/appx/manifest/uap/windows10/17"
  xmlns:rescap="http://schemas.microsoft.com/appx/manifest/foundation/windows10/restrictedcapabilities"
  xmlns:desktop4="http://schemas.microsoft.com/appx/manifest/desktop/windows10/4"
  xmlns:desktop6="http://schemas.microsoft.com/appx/manifest/desktop/windows10/6">
  <!-- Identity name cannot have spaces or underscores in it -->
  <Identity Name="{OUTPUT_NAME}"
            Publisher="CN={PUBLISHER_CN}"
            Version="{PRODUCT_MAJOR_VERSION}.{PRODUCT_MINOR_VERSION}.{PRODUCT_MAINTENANCE_VERSION}.0"
            ProcessorArchitecture="{ARCH}" />
  <Properties>
    <DisplayName>{MSIX_DISPLAYNAME}</DisplayName>
    <PublisherDisplayName>{VENDOR}</PublisherDisplayName>
    <Description>{DESCRIPTION}</Description>
    <Logo>_msix_logos/duke50.png</Logo>
    <desktop6:RegistryWriteVirtualization>disabled</desktop6:RegistryWriteVirtualization>
    <desktop6:FileSystemWriteVirtualization>disabled</desktop6:FileSystemWriteVirtualization>
    <uap17:UpdateWhileInUse>defer</uap17:UpdateWhileInUse>
    <uap10:PackageIntegrity>
      <uap10:Content Enforcement="on" />
    </uap10:PackageIntegrity>
  </Properties>
  <Resources>
    <Resource Language="en-us" />
  </Resources>
  <Dependencies>
    <TargetDeviceFamily Name="MSIXCore.Desktop" MinVersion="6.1.7601.0" MaxVersionTested="10.0.22000.1" />
    <TargetDeviceFamily Name="Windows.Desktop" MinVersion="10.0.17763.0" MaxVersionTested="10.0.22000.1" />
  </Dependencies>
  <Applications>
    <Application  Id="JAVA"
                  Executable="bin\java.exe"
                  EntryPoint="Windows.FullTrustApplication"
                  desktop4:SupportsMultipleInstances="true"
                  desktop4:Subsystem="console">
      <uap:VisualElements DisplayName="java"
                          Description="Run java files with java.exe"
                          Square150x150Logo="_msix_logos/duke150.png"
                          Square44x44Logo="_msix_logos/duke44.png"
                          BackgroundColor="transparent">
      </uap:VisualElements>
      <Extensions>
        <uap5:Extension Category="windows.appExecutionAlias">
          <uap5:AppExecutionAlias desktop4:Subsystem="console">
            <uap5:ExecutionAlias Alias="java.exe" />
          </uap5:AppExecutionAlias>
        </uap5:Extension>
      </Extensions>
    </Application>
    <Application  Id="JAVAW"
                  Executable="bin\javaw.exe"
                  EntryPoint="Windows.FullTrustApplication"
                  desktop4:SupportsMultipleInstances="true"
                  desktop4:Subsystem="console">
      <uap:VisualElements DisplayName="Run javaw.exe"
                          Description="javaw"
                          Square150x150Logo="_msix_logos/duke150.png"
                          Square44x44Logo="_msix_logos/duke44.png"
                          BackgroundColor="transparent">
      </uap:VisualElements>
      <Extensions>
        <uap3:Extension Category="windows.fileTypeAssociation">
          <uap3:FileTypeAssociation Name="jar">
            <uap:SupportedFileTypes>
              <uap:FileType>.jar</uap:FileType>
            </uap:SupportedFileTypes>
            <uap2:SupportedVerbs>
              <uap3:Verb Id="open" Parameters="-jar &quot;%1&quot; %*">open</uap3:Verb>
            </uap2:SupportedVerbs>
          </uap3:FileTypeAssociation>
        </uap3:Extension>
      </Extensions>
    </Application>
  </Applications>
  <Capabilities>
    <rescap:Capability Name="runFullTrust" />
    <rescap:Capability Name="unvirtualizedResources" />
  </Capabilities>
</Package>